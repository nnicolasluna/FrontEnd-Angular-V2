<div class="body">
    <div class="body__header">
        <h1 class="body__h1">Registro de Rol</h1>
    </div>
    <div class="body__content">
        <mat-card class="card card--small">
            <app-form-header [titulo]="'Registro de Rol'"></app-form-header>
            <mat-card-content class="card__content">
                <mat-tab-group>
                    <mat-tab label="Datos">
                        <form id="loginform" [formGroup]="formGroup">
                            <div class="input-group">
                                <label for="" class="input-group__formlabel">Nombre de Rol:</label>
                                <input type="text" formControlName="nombre" placeholder="Ejem. Cajero"
                                    class="input-group__imput"
                                    [ngClass]="{'invalid': nombreControl.invalid && (nombreControl.dirty || nombreControl.touched), 'valid': nombreControl.valid}">
                                <div *ngIf="nombreControl.invalid && (nombreControl.dirty || nombreControl.touched)"
                                    class="text-danger">
                                    <span *ngIf="nombreControl.errors?.['required']">El Nombre es Requerido</span>
                                    <span *ngIf="nombreControl.errors?.['minlength']">El Nombre debe contener mas de 3
                                        caracteres</span>
                                    <span *ngIf="nombreControl.errors?.['maxlength']">El Nombre no debe tener mas de
                                        30
                                        caracteres</span>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="" class="input-group__formlabel">Descripcion:</label>
                                <input type="text" formControlName="descripcion" class="input-group__imput"
                                    placeholder="Ejem. Este Rol es Asignado a Cajero" appNoLeadingTrailingWhitespace
                                    [ngClass]="{'invalid': descripcionControl.invalid && (descripcionControl.dirty || descripcionControl.touched), 'valid': descripcionControl.valid}">
                                <div *ngIf="descripcionControl.invalid && (descripcionControl.dirty || descripcionControl.touched)"
                                    class="text-danger">
                                    <span *ngIf="descripcionControl.errors?.['required']">La Descripcion es
                                        Requerida</span>
                                    <span *ngIf="descripcionControl.errors?.['minlength']">La Descripcion debe contener
                                        mas
                                        de 3
                                        caracteres</span>
                                    <span *ngIf="descripcionControl.errors?.['maxlength']">La Descripcion no debe tener
                                        mas
                                        de
                                        100
                                        caracteres</span>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="" class="input-group__formlabel">Nivel:</label>
                                <input type="text" formControlName="nivel" class="input-group__imput"
                                    placeholder="Ejem. nivel 1" appNoLeadingTrailingWhitespace
                                    [ngClass]="{'invalid': nivelControl.invalid && (nivelControl.dirty || nivelControl.touched), 'valid': nivelControl.valid}">
                                <div *ngIf="nivelControl.invalid && (nivelControl.dirty || nivelControl.touched)"
                                    class="text-danger">
                                    <span *ngIf="nivelControl.errors?.['required']">La nivel es Requerida</span>
                                    <span *ngIf="nivelControl.errors?.['minlength']">La nivel debe contener mas
                                        de 3
                                        caracteres</span>
                                    <span *ngIf="nivelControl.errors?.['maxlength']">La nivel no debe tener mas
                                        de
                                        100
                                        caracteres</span>
                                </div>
                            </div>
                        </form>
                    </mat-tab>
                    <mat-tab label="AsignaciÃ³n de Permisos">
                        <div class="AsignacionPermisos">
                            <!-- 
                        <ul>
                            <li *ngFor="let subsistema of permisos_data">
                                <h3>{{ subsistema.nombre }}</h3>
                                <ul>
                                    <li *ngFor="let menus of subsistema.menus">
                                        {{ menus.nombre }}
                                        <ul>
                                            <li *ngFor="let comandos of menus.comandos">
                                                <input type="checkbox" [value]="comandos.uuid"(change)="toggleSeleccion(comandos.uuid, $event)"> {{ comandos.nombre }}
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul> -->

                            <ul>
                                <li *ngFor="let subsistema of permisos_data">
                                    <div class="itemCollapsed"><button><mat-icon
                                                (click)="toggleMarcado(subsistema)">expand_more</mat-icon></button>{{
                                        subsistema.nombre }}</div>
                                    <ul *ngIf="subsistema.marcado">
                                        <li *ngFor="let menu of subsistema.menus">
                                            <div class="itemCollapsed"><button><mat-icon
                                                        (click)="toggleMarcado(menu)">expand_more</mat-icon></button>{{
                                                menu.nombre }}</div>
                                            <ul *ngIf="menu.marcado">
                                                <li *ngFor="let comando of menu.comandos">
                                                    <input type="checkbox"
                                                        (change)="toggleComando(comando.uuid, $event)">
                                                    {{ comando.nombre }}
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </mat-tab>
                </mat-tab-group>
            </mat-card-content>
            <app-form-footer [regreso]="'/home/administracion/roles'" (saveClicked)="create()"></app-form-footer>
        </mat-card>

    </div>
</div>